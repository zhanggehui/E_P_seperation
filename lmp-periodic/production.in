include /home/liufeng_pkuhpc/lustre3/zgh/GO_MD/md_scripts/lmp-periodic/def_setting.in

variable        laststep file ../nvtequ/nvtequ.dump
next laststep
read_dump       ../nvtequ/nvtequ.dump ${laststep} x y z vx vy vz replace yes box yes
write_dump      all custom nvtequ.dump id type xu yu zu

group           gra type  1:3
fix             freeze gra setforce 0 0 0

group           OW type 7
variable        n_OW equal count(OW)
variable        target_p equal 1000    # Mpa
variable        area equal lx*lz
variable        f_ratio equal 6.022*1e-4/4.186
variable        add_f equal v_target_p*v_f_ratio*v_area/v_n_OW

fix             push_OW OW addforce 0 $(v_add_f) 0
fix             nvt all nvt temp 300 300 100.0
dump            production all custom 10000 production.dump id type xu yu zu vx vy vz
thermo          10000
run             10000000
